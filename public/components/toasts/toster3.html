<div class="relative w-auto h-auto" x-data>
  <!-- The x-data below sets defaults for a toast example. 
       You can trigger a toast by calling popToast(). -->
  <div
    x-data="{ 
      title: 'Default Toast Notification', 
      description: '',
      type: 'default',
      // We only use top-center now
      position: 'top-center',
      popToast() {
        toast(this.title, {
          description: this.description,
          type: this.type
        });
      }
    }"
    x-init="
      window.toast = function(message, options = {}) {
        let description = options.description || '';
        let type = options.type || 'default';
        // For simplicity, we ignore position/html in the call 
        // since we only do top-center
        window.dispatchEvent(
          new CustomEvent('toast-show', { 
            detail : { type, message, description } 
          })
        );
      }
    "
    class="relative space-y-5">
    <!--
      Example usage:
      <button @click="title='Hey!'; description='This is a toast with description'; type='info'; popToast()">Pop a Toast</button>
    -->
  </div>

  <!-- Teleported to body so the toasts are fixed and sit on top. -->
  <template x-teleport="body">
    <ul
      x-data="toster"
      @toast-show.window="
        event.stopPropagation();
        // We push a new toast into our array with everything needed
        toasts.unshift({
          id: 'toast-' + Math.random().toString(16).slice(2),
          message: event.detail.message,
          description: event.detail.description,
          type: event.detail.type
        });
      "
      x-init="
        // Kick off initial positioning if anything is pre-loaded
        stackToasts();
      "
      class="fixed block w-full z-[99] sm:max-w-xs left-1/2 -translate-x-1/2 top-0 sm:mt-6"
      x-cloak>
      <template x-for="(toast, index) in toasts" :key="toast.id">
        <li
          :id="toast.id"
          x-data
          x-init="
            // Slide in from top
            $el.firstElementChild.classList.add('opacity-0', '-translate-y-full');
            setTimeout(() => {
              setTimeout(() => {
                $el.firstElementChild.classList.remove('opacity-0', '-translate-y-full');
                $el.firstElementChild.classList.add('opacity-100', 'translate-y-0');
                // Re-stack after anim
                setTimeout(stackToasts, 10);
              }, 5);
            }, 50);

            // Auto-dismiss after 4s
            setTimeout(() => {
              setTimeout(() => {
                $el.firstElementChild.classList.remove('opacity-100');
                $el.firstElementChild.classList.add('opacity-0', '-translate-y-full');
                setTimeout(() => {
                  deleteToastWithId(toast.id);
                }, 300);
              }, 5);
            }, 4000);
          "
          class="absolute w-full duration-300 ease-out select-none sm:max-w-xs">
          <!-- Toast Content -->
          <span
            class="relative flex flex-col items-start w-full p-4 transition-all duration-300 ease-out bg-white border border-gray-100 shadow-[0_5px_15px_-3px_rgba(0,0,0,0.08)] sm:rounded-md group">
            <!-- Icon + Title -->
            <div
              class="flex items-center"
              :class="{
                   'text-green-500' : toast.type=='success',
                   'text-blue-500'  : toast.type=='info',
                   'text-orange-400': toast.type=='warning',
                   'text-red-500'   : toast.type=='danger',
                   'text-gray-800'  : toast.type=='default'
                 }">
              <!-- Your SVG icons (adjust `use href` to point to your own sprite) -->
              <svg width="24" height="24" class="w-[18px] h-[18px] mr-1.5 -ml-1" x-show="toast.type == 'success'">
                <use href="/icons/icons.svg#check-circle" />
              </svg>
              <svg width="24" height="24" class="w-[18px] h-[18px] mr-1.5 -ml-1" x-show="toast.type == 'info'">
                <use href="/icons/icons.svg#info" />
              </svg>
              <svg width="24" height="24" class="w-[18px] h-[18px] mr-1.5 -ml-1" x-show="toast.type == 'warning'">
                <use href="/icons/icons.svg#warning" />
              </svg>
              <svg width="24" height="24" class="w-[18px] h-[18px] mr-1.5 -ml-1" x-show="toast.type == 'danger'">
                <use href="/icons/icons.svg#error" />
              </svg>

              <p class="text-[13px] font-medium leading-none text-gray-800" x-text="toast.message"></p>
            </div>

            <!-- Description -->
            <p
              x-show="toast.description"
              :class="{ 'pl-5' : toast.type!='default' }"
              class="mt-1.5 text-xs leading-none opacity-70"
              x-text="toast.description"></p>

            <!-- Close button -->
            <span
              @click="burnToast(toast.id)"
              class="absolute p-1.5 text-gray-400 duration-100 ease-in-out rounded-full cursor-pointer hover:bg-gray-50 hover:text-gray-500 right-0 top-0 mt-2.5 mr-2.5">
              <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M4.293 4.293a1 1 0 011.414 0L10 8.586 
                  l4.293-4.293a1 1 0 011.414 1.414L11.414 10 
                  l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414 
                  l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 
                  4.293 5.707a1 1 0 010-1.414z"
                  clip-rule="evenodd"></path>
              </svg>
            </span>
          </span>
        </li>
      </template>
    </ul>
  </template>
</div>
